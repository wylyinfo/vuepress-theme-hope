<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.0" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.5" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://mister-hope.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html"><meta property="og:site_name" content="博客演示"><meta property="og:title" content="数据结构"><meta property="og:description" content="数据结构 研究非数值计算的程序设计问题中的操作对象，以及它们之间的关系和操作等相关问题 逻辑结构：集合结构、线性结构、树形结构、图形结构 物理结构：顺序存储结构、链式存储结构 程序运行时间，依赖于算法好坏和问题输入规模（忽略因素：软件编译产生的代码质量，硬件机器执行指令的速度） 线性结构 顺序存储：存取数据时间复杂度o(1)，插入删除时间复杂度o(n)，适合数据存取，需要预分配存储空间 链式存储：存取数据时间复杂度o(n)，插入删除时间复杂度o(1)，适合频繁插入删除 栈与队列"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-12-17T11:44:33.000Z"><meta property="article:author" content="Mr.Hope"><meta property="article:modified_time" content="2023-12-17T11:44:33.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"数据结构","image":[""],"dateModified":"2023-12-17T11:44:33.000Z","author":[{"@type":"Person","name":"Mr.Hope","url":"https://mister-hope.com"}]}</script><title>数据结构 | 博客演示</title><meta name="description" content="数据结构 研究非数值计算的程序设计问题中的操作对象，以及它们之间的关系和操作等相关问题 逻辑结构：集合结构、线性结构、树形结构、图形结构 物理结构：顺序存储结构、链式存储结构 程序运行时间，依赖于算法好坏和问题输入规模（忽略因素：软件编译产生的代码质量，硬件机器执行指令的速度） 线性结构 顺序存储：存取数据时间复杂度o(1)，插入删除时间复杂度o(n)，适合数据存取，需要预分配存储空间 链式存储：存取数据时间复杂度o(n)，插入删除时间复杂度o(1)，适合频繁插入删除 栈与队列">
    <link rel="preload" href="/assets/style-64i7rTmW.css" as="style"><link rel="stylesheet" href="/assets/style-64i7rTmW.css">
    <link rel="modulepreload" href="/assets/app-lybKqyLW.js"><link rel="modulepreload" href="/assets/大话数据结构.html-bgqRdMQQ.js"><link rel="modulepreload" href="/assets/大话数据结构.html-1nNqm3L-.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-x3n3nnut.js">
    <link rel="prefetch" href="/assets/index.html-2WIsKDLS.js" as="script"><link rel="prefetch" href="/assets/intro.html-aN-Z5FJ0.js" as="script"><link rel="prefetch" href="/assets/index.html-2-TVzRZH.js" as="script"><link rel="prefetch" href="/assets/disable.html-NfiABRyJ.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-2tu9C7Rg.js" as="script"><link rel="prefetch" href="/assets/layout.html-K1XMijuG.js" as="script"><link rel="prefetch" href="/assets/markdown.html-M766fiib.js" as="script"><link rel="prefetch" href="/assets/page.html-fdZRaioO.js" as="script"><link rel="prefetch" href="/assets/cherry.html-BEu7Iemp.js" as="script"><link rel="prefetch" href="/assets/dragonfruit.html-SInH6nxR.js" as="script"><link rel="prefetch" href="/assets/strawberry.html-Wd8K8_bp.js" as="script"><link rel="prefetch" href="/assets/tomato.html-tFnyg2jm.js" as="script"><link rel="prefetch" href="/assets/分布式ID生成器.html-UzxxZ_O8.js" as="script"><link rel="prefetch" href="/assets/分布式事务.html-mwCiA1KS.js" as="script"><link rel="prefetch" href="/assets/分布式原理.html-MS8znpRd.js" as="script"><link rel="prefetch" href="/assets/分布式锁.html-awXvBYSL.js" as="script"><link rel="prefetch" href="/assets/算法labuladong.html-7kU6j8Z1.js" as="script"><link rel="prefetch" href="/assets/算法图解.html-U4OQDOmp.js" as="script"><link rel="prefetch" href="/assets/regex.html-OjcPxrkU.js" as="script"><link rel="prefetch" href="/assets/大话设计模式.html-McU-hrYc.js" as="script"><link rel="prefetch" href="/assets/延时队列.html-qBmdmuna.js" as="script"><link rel="prefetch" href="/assets/1.html-0CuUCybk.js" as="script"><link rel="prefetch" href="/assets/2.html-BLxlzr7_.js" as="script"><link rel="prefetch" href="/assets/3.html-OnOkO9jh.js" as="script"><link rel="prefetch" href="/assets/4.html-ACoL8goz.js" as="script"><link rel="prefetch" href="/assets/1.html-9HZ6s6sL.js" as="script"><link rel="prefetch" href="/assets/2.html-G5xS20cI.js" as="script"><link rel="prefetch" href="/assets/3.html-toPgYx42.js" as="script"><link rel="prefetch" href="/assets/4.html-KBcotn04.js" as="script"><link rel="prefetch" href="/assets/404.html-KvE_Cm3e.js" as="script"><link rel="prefetch" href="/assets/index.html-0sNQxaQf.js" as="script"><link rel="prefetch" href="/assets/index.html-urTQj0YK.js" as="script"><link rel="prefetch" href="/assets/index.html-Y1rqfq5V.js" as="script"><link rel="prefetch" href="/assets/index.html-wx2SJRRU.js" as="script"><link rel="prefetch" href="/assets/index.html-6HJnvB26.js" as="script"><link rel="prefetch" href="/assets/index.html-4SPqCQea.js" as="script"><link rel="prefetch" href="/assets/index.html-PkTc1YqJ.js" as="script"><link rel="prefetch" href="/assets/index.html-UdgAgtzO.js" as="script"><link rel="prefetch" href="/assets/index.html-AQklAtfn.js" as="script"><link rel="prefetch" href="/assets/index.html-HMNkmBgj.js" as="script"><link rel="prefetch" href="/assets/index.html-y9hzLwAa.js" as="script"><link rel="prefetch" href="/assets/index.html-VMTO-_6Y.js" as="script"><link rel="prefetch" href="/assets/index.html-pvtc5fOn.js" as="script"><link rel="prefetch" href="/assets/index.html-tuGh_-ts.js" as="script"><link rel="prefetch" href="/assets/index.html-XhlHoO1B.js" as="script"><link rel="prefetch" href="/assets/index.html-Am4HtayN.js" as="script"><link rel="prefetch" href="/assets/index.html-TsDB53_7.js" as="script"><link rel="prefetch" href="/assets/index.html-lvWo0wWc.js" as="script"><link rel="prefetch" href="/assets/index.html-l9HqnFKx.js" as="script"><link rel="prefetch" href="/assets/index.html-XBX1lLq2.js" as="script"><link rel="prefetch" href="/assets/index.html-XnCL83Tw.js" as="script"><link rel="prefetch" href="/assets/index.html-1q42_a4Z.js" as="script"><link rel="prefetch" href="/assets/index.html-04fk25DP.js" as="script"><link rel="prefetch" href="/assets/index.html-vezof6zv.js" as="script"><link rel="prefetch" href="/assets/index.html-uk2ZNxff.js" as="script"><link rel="prefetch" href="/assets/index.html-VcDYXQpm.js" as="script"><link rel="prefetch" href="/assets/index.html-1LjdHnIC.js" as="script"><link rel="prefetch" href="/assets/index.html-qFfMV-fU.js" as="script"><link rel="prefetch" href="/assets/index.html-3cj3J5d8.js" as="script"><link rel="prefetch" href="/assets/index.html-TGsEcjxA.js" as="script"><link rel="prefetch" href="/assets/index.html-3UzTpZWX.js" as="script"><link rel="prefetch" href="/assets/index.html-OzcJGRhq.js" as="script"><link rel="prefetch" href="/assets/index.html--ByCqcIb.js" as="script"><link rel="prefetch" href="/assets/index.html-8tWoFC7Z.js" as="script"><link rel="prefetch" href="/assets/intro.html-BYrgxoQy.js" as="script"><link rel="prefetch" href="/assets/index.html-qu1qjMcl.js" as="script"><link rel="prefetch" href="/assets/disable.html-CzPeHRG4.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-6Bn8lW-2.js" as="script"><link rel="prefetch" href="/assets/layout.html-xhA1_8NU.js" as="script"><link rel="prefetch" href="/assets/markdown.html-fVgluYj1.js" as="script"><link rel="prefetch" href="/assets/page.html-fUlhOwun.js" as="script"><link rel="prefetch" href="/assets/cherry.html-ivfXT925.js" as="script"><link rel="prefetch" href="/assets/dragonfruit.html-w-FDv67I.js" as="script"><link rel="prefetch" href="/assets/strawberry.html-08V67a9l.js" as="script"><link rel="prefetch" href="/assets/tomato.html-2xq793EI.js" as="script"><link rel="prefetch" href="/assets/分布式ID生成器.html-4CLQ5bIa.js" as="script"><link rel="prefetch" href="/assets/分布式事务.html-PGX3EUsF.js" as="script"><link rel="prefetch" href="/assets/分布式原理.html-yV8MLFzU.js" as="script"><link rel="prefetch" href="/assets/分布式锁.html-DI2Nkvzw.js" as="script"><link rel="prefetch" href="/assets/算法labuladong.html-HvOjn3gg.js" as="script"><link rel="prefetch" href="/assets/算法图解.html-BxhrpsvT.js" as="script"><link rel="prefetch" href="/assets/regex.html-ZCp96NOs.js" as="script"><link rel="prefetch" href="/assets/大话设计模式.html-g1fNa0ja.js" as="script"><link rel="prefetch" href="/assets/延时队列.html-FTDY1cvw.js" as="script"><link rel="prefetch" href="/assets/1.html-ymhtsKHE.js" as="script"><link rel="prefetch" href="/assets/2.html-_CYCSVrQ.js" as="script"><link rel="prefetch" href="/assets/3.html-se3q8vPM.js" as="script"><link rel="prefetch" href="/assets/4.html-D7kOm-MY.js" as="script"><link rel="prefetch" href="/assets/1.html-xauCLT09.js" as="script"><link rel="prefetch" href="/assets/2.html-9HS514w6.js" as="script"><link rel="prefetch" href="/assets/3.html--ln6zu5p.js" as="script"><link rel="prefetch" href="/assets/4.html-o2jlCzQN.js" as="script"><link rel="prefetch" href="/assets/404.html-y8yzZ1yt.js" as="script"><link rel="prefetch" href="/assets/index.html-_ge3xRVW.js" as="script"><link rel="prefetch" href="/assets/index.html-IDhVb1hD.js" as="script"><link rel="prefetch" href="/assets/index.html-XSRzQYWh.js" as="script"><link rel="prefetch" href="/assets/index.html-ylYbhOv3.js" as="script"><link rel="prefetch" href="/assets/index.html-mRClnl9D.js" as="script"><link rel="prefetch" href="/assets/index.html-ZljWxgQM.js" as="script"><link rel="prefetch" href="/assets/index.html-HZcbG8AE.js" as="script"><link rel="prefetch" href="/assets/index.html-QwRqfXPh.js" as="script"><link rel="prefetch" href="/assets/index.html-JNjyxVdm.js" as="script"><link rel="prefetch" href="/assets/index.html-DnNFAtlv.js" as="script"><link rel="prefetch" href="/assets/index.html-nL_t36Ic.js" as="script"><link rel="prefetch" href="/assets/index.html-8uy153fu.js" as="script"><link rel="prefetch" href="/assets/index.html-ORVnriiQ.js" as="script"><link rel="prefetch" href="/assets/index.html-iIuhOw1G.js" as="script"><link rel="prefetch" href="/assets/index.html-TUyNwP4H.js" as="script"><link rel="prefetch" href="/assets/index.html-XXhkIDUy.js" as="script"><link rel="prefetch" href="/assets/index.html-G1KkiDVD.js" as="script"><link rel="prefetch" href="/assets/index.html-tnS3EqYj.js" as="script"><link rel="prefetch" href="/assets/index.html-nasFSu2i.js" as="script"><link rel="prefetch" href="/assets/index.html-rznS1rXY.js" as="script"><link rel="prefetch" href="/assets/index.html-dOx3hpdo.js" as="script"><link rel="prefetch" href="/assets/index.html-j-NUHG68.js" as="script"><link rel="prefetch" href="/assets/index.html-nQCugX1y.js" as="script"><link rel="prefetch" href="/assets/index.html-EQ5Hl_2U.js" as="script"><link rel="prefetch" href="/assets/index.html--biTOFMa.js" as="script"><link rel="prefetch" href="/assets/index.html-cHOn9fs9.js" as="script"><link rel="prefetch" href="/assets/index.html-HCtKhFqK.js" as="script"><link rel="prefetch" href="/assets/index.html-Laca8pZH.js" as="script"><link rel="prefetch" href="/assets/index.html-Yk8HIAgh.js" as="script"><link rel="prefetch" href="/assets/index.html-f8yGQA4L.js" as="script"><link rel="prefetch" href="/assets/index.html-KslgFjCx.js" as="script"><link rel="prefetch" href="/assets/index.html-xkdzS8Iq.js" as="script"><link rel="prefetch" href="/assets/index.html-Qoz2yfpm.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-i2ohwMnJ.js" as="script"><link rel="prefetch" href="/assets/SearchResult-S4u-vAqL.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo" src="https://theme-hope-assets.vuejs.press/logo.svg" aria-hidden><!----><span class="vp-site-name hide-in-pad">博客演示</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="首页" class="vp-link nav-link nav-link" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>首页<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="主要功能与配置演示" class="vp-link nav-link nav-link" href="/demo/"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>主要功能与配置演示<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="分布式" class="vp-link nav-link nav-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>分布式<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="博文"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>博文</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>苹果</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="苹果1" class="vp-link nav-link nav-link" href="/posts/apple/1.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>苹果1<!----></a></li><li class="dropdown-subitem"><a aria-label="苹果2" class="vp-link nav-link nav-link" href="/posts/apple/2.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>苹果2<!----></a></li><li class="dropdown-subitem"><a aria-label="苹果 3" class="vp-link nav-link nav-link" href="/posts/apple/3.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>苹果 3<!----></a></li><li class="dropdown-subitem"><a aria-label="苹果 4" class="vp-link nav-link nav-link" href="/posts/apple/4.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>苹果 4<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>香蕉</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="香蕉 1" class="vp-link nav-link nav-link" href="/posts/banana/1.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>香蕉 1<!----></a></li><li class="dropdown-subitem"><a aria-label="香蕉 2" class="vp-link nav-link nav-link" href="/posts/banana/2.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>香蕉 2<!----></a></li><li class="dropdown-subitem"><a aria-label="香蕉 3" class="vp-link nav-link nav-link" href="/posts/banana/3.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>香蕉 3<!----></a></li><li class="dropdown-subitem"><a aria-label="香蕉 4" class="vp-link nav-link nav-link" href="/posts/banana/4.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>香蕉 4<!----></a></li></ul></li><li class="dropdown-item"><a aria-label="樱桃" class="vp-link nav-link nav-link" href="/posts/cherry.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>樱桃<!----></a></li><li class="dropdown-item"><a aria-label="火龙果" class="vp-link nav-link nav-link" href="/posts/dragonfruit.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>火龙果<!----></a></li><li class="dropdown-item"><a aria-label="番茄" class="vp-link nav-link nav-link" href="/posts/tomato.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>番茄<!----></a></li><li class="dropdown-item"><a aria-label="草莓" class="vp-link nav-link nav-link" href="/posts/strawberry.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>草莓<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://theme-hope.vuejs.press/zh/" rel="noopener noreferrer" target="_blank" aria-label="V2 文档" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>V2 文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a aria-label="首页" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>首页<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><a aria-label="分布式" class="vp-link nav-link vp-sidebar-title nav-link vp-sidebar-title" href="/%E5%88%86%E5%B8%83%E5%BC%8F/"><!---->分布式<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="/分布式/分布式ID生成器" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8FID%E7%94%9F%E6%88%90%E5%99%A8.html"><!---->/分布式/分布式ID生成器<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="分布式事务" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html"><!---->分布式事务<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="分布式架构" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E5%8E%9F%E7%90%86.html"><!---->分布式架构<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="分布式锁需要具备哪些条件" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81.html"><!---->分布式锁需要具备哪些条件<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">文章</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Apple</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Banana</span><span class="vp-arrow end"></span></button><!----></section></li><li><!--[--><a aria-label="樱桃" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/posts/cherry.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>樱桃<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="火龙果" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/posts/dragonfruit.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>火龙果<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="番茄" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/posts/tomato.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>番茄<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="草莓" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/posts/strawberry.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>草莓<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a aria-label="介绍页" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/intro.html"><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span>介绍页<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="https://plugin-md-enhance.vuejs.press/zh/guide/content/revealjs/demo.html" rel="noopener noreferrer" target="_blank" aria-label="幻灯片" class="nav-link vp-sidebar-link vp-sidebar-page"><span class="font-icon icon fa-fw fa-sm fas fa-person-chalkboard" style=""></span>幻灯片<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->数据结构</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://mister-hope.com" target="_blank" rel="noopener noreferrer">Mr.Hope</a></span><span property="author" content="Mr.Hope"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-12-17T11:44:33.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 26 分钟</span><meta property="timeRequired" content="PT26M"></span><!----><!----></div><hr></div><!----><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="数据结构" tabindex="-1"><a class="header-anchor" href="#数据结构" aria-hidden="true">#</a> 数据结构</h1><p>研究非数值计算的程序设计问题中的操作对象，以及它们之间的关系和操作等相关问题</p><p>逻辑结构：集合结构、线性结构、树形结构、图形结构</p><p>物理结构：顺序存储结构、链式存储结构</p><p>程序运行时间，依赖于算法好坏和问题输入规模（忽略因素：软件编译产生的代码质量，硬件机器执行指令的速度）</p><h5 id="线性结构" tabindex="-1"><a class="header-anchor" href="#线性结构" aria-hidden="true">#</a> 线性结构</h5><p>顺序存储：存取数据时间复杂度o(1)，插入删除时间复杂度o(n)，适合数据存取，需要预分配存储空间</p><p>链式存储：存取数据时间复杂度o(n)，插入删除时间复杂度o(1)，适合频繁插入删除</p><h5 id="栈与队列" tabindex="-1"><a class="header-anchor" href="#栈与队列" aria-hidden="true">#</a> 栈与队列</h5><h5 id="栈-限定仅在表尾进行插入和删除操作的线性结构" tabindex="-1"><a class="header-anchor" href="#栈-限定仅在表尾进行插入和删除操作的线性结构" aria-hidden="true">#</a> 栈：限定仅在表尾进行插入和删除操作的线性结构</h5><p>顺序栈：必须事先确定存储空间大小，存在内存空间浪费，时间复杂度o(1)</p><p>链栈：每个元素都有指针域，增加了内存开销，长度无限制，时间复杂度o(1)</p><h5 id="队列-只允许在一端进行插入操作-而在另一端进行删除操作的线性结构" tabindex="-1"><a class="header-anchor" href="#队列-只允许在一端进行插入操作-而在另一端进行删除操作的线性结构" aria-hidden="true">#</a> 队列：只允许在一端进行插入操作，而在另一端进行删除操作的线性结构</h5><p>循环顺序队列：时间复杂度o(1)，事先申请空间，使用期间不释放</p><p>链队列：时间复杂度o(1)，需要指针域，会产生空间开销</p><h5 id="二叉树" tabindex="-1"><a class="header-anchor" href="#二叉树" aria-hidden="true">#</a> 二叉树</h5><p>平衡二叉树（AVL树）：二叉排序树，左右子树高度差至多等于1，查找、插入删除时间复杂度o(log(n))</p><p>多路查找树（B树）：子结点可以多于两个，每个结点可存储多个元素（降低磁盘IO）</p><p>B+树：所有叶子结点包含全部关键字及其指针，且顺序链接(适合范围查找)</p><p>红黑树：根结点为黑色，所有节点都是黑色或红色，所有叶子节点(Null)都是黑色，红色节点子节点一定是黑色，任一节点到叶子节点所有路径上黑色节点数量相同。AVL树是严格平衡二叉树，要求每个节点左右子树高度差不超过1，查找效率，平衡调整成本更高，适合频繁查找；红黑树要求任何一条路径长度不超过其他路径长度2倍，适合频繁插入删除。</p><h5 id="散列表-哈希表" tabindex="-1"><a class="header-anchor" href="#散列表-哈希表" aria-hidden="true">#</a> 散列表（哈希表）</h5><p>查找时间复杂度o(1)，影响因素：散列函数是否均匀，处理冲突的方法，散列表的装填因子</p><h5 id="跳跃表" tabindex="-1"><a class="header-anchor" href="#跳跃表" aria-hidden="true">#</a> 跳跃表</h5><p>底层基于链表实现，含有多层，每个节点的每层都有指向表尾方向最近一个节点的指针，查询原理类似二分查找，查找、插入删除时间复杂度o(log(n))，维持结构平衡成本比较低</p><h4 id="java" tabindex="-1"><a class="header-anchor" href="#java" aria-hidden="true">#</a> JAVA</h4><h5 id="arraylist-底层基于数组" tabindex="-1"><a class="header-anchor" href="#arraylist-底层基于数组" aria-hidden="true">#</a> ArrayList：底层基于数组</h5><p>类内部使用默认缺省时对象数组的容量大小，自动扩容</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">DEFAULT_CAPACITY</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">transient</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">;</span><span class="token comment">//缓存数组，通常会预留容量</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// overflow-conscious code</span>
    <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        newCapacity <span class="token operator">=</span> minCapacity<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        newCapacity <span class="token operator">=</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// minCapacity is usually close to size, so this is a win:</span>
    elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="linkedlist-循环双向链表" tabindex="-1"><a class="header-anchor" href="#linkedlist-循环双向链表" aria-hidden="true">#</a> LinkedList: 循环双向链表</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> first<span class="token punctuation">;</span><span class="token comment">//结点保存前驱和后继的引用</span>
<span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> last<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">E</span> item<span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="hashmap-数组-链表-红黑树" tabindex="-1"><a class="header-anchor" href="#hashmap-数组-链表-红黑树" aria-hidden="true">#</a> HashMap：数组+链表+红黑树</h5><p>数组长度是2的n次幂（散列分布均匀）</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">tableSizeFor</span><span class="token punctuation">(</span><span class="token keyword">int</span> cap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> cap <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    n <span class="token operator">|=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    n <span class="token operator">|=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
    n <span class="token operator">|=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">4</span><span class="token punctuation">;</span>
    n <span class="token operator">|=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">8</span><span class="token punctuation">;</span>
    n <span class="token operator">|=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">16</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;=</span> <span class="token constant">MAXIMUM_CAPACITY</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token constant">MAXIMUM_CAPACITY</span> <span class="token operator">:</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>元素个数超过数组大小*loadFactor，会进行数组扩容（降低碰撞几率）</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">DEFAULT_INITIAL_CAPACITY</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">float</span> <span class="token constant">DEFAULT_LOAD_FACTOR</span> <span class="token operator">=</span> <span class="token number">0.75f</span><span class="token punctuation">;</span>

<span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> oldTab <span class="token operator">=</span> table<span class="token punctuation">;</span>
    <span class="token keyword">int</span> oldCap <span class="token operator">=</span> <span class="token punctuation">(</span>oldTab <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> oldTab<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span> oldThr <span class="token operator">=</span> threshold<span class="token punctuation">;</span>
    <span class="token keyword">int</span> newCap<span class="token punctuation">,</span> newThr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldCap <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>oldCap <span class="token operator">&gt;=</span> <span class="token constant">MAXIMUM_CAPACITY</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            threshold <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> oldTab<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>newCap <span class="token operator">=</span> oldCap <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token constant">MAXIMUM_CAPACITY</span> <span class="token operator">&amp;&amp;</span>
                 oldCap <span class="token operator">&gt;=</span> <span class="token constant">DEFAULT_INITIAL_CAPACITY</span><span class="token punctuation">)</span>
            newThr <span class="token operator">=</span> oldThr <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// double threshold</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>oldThr <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// initial capacity was placed in threshold</span>
        newCap <span class="token operator">=</span> oldThr<span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>               <span class="token comment">// zero initial threshold signifies using defaults</span>
        newCap <span class="token operator">=</span> <span class="token constant">DEFAULT_INITIAL_CAPACITY</span><span class="token punctuation">;</span>
        newThr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_LOAD_FACTOR</span> <span class="token operator">*</span> <span class="token constant">DEFAULT_INITIAL_CAPACITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>链表与红黑树转换（Poisson distribution链表长度等于8的概率约为0.00000006，查找性能o(n) -&gt; o(log(n))，空间复杂度接近翻倍）</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">TREEIFY_THRESHOLD</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span><span class="token comment">//转为树</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">UNTREEIFY_THRESHOLD</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span><span class="token comment">//转为链表</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">MIN_TREEIFY_CAPACITY</span> <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">;</span><span class="token comment">//转为树，数组最小容量</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>散列函数（hash取余计算综合高位低位，减少hash冲突）</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hash</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> h<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token punctuation">(</span>h <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token punctuation">(</span>h <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
index <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token comment">//n表示长度</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="copyonwritearraylist-线程安全-可重入锁" tabindex="-1"><a class="header-anchor" href="#copyonwritearraylist-线程安全-可重入锁" aria-hidden="true">#</a> CopyOnWriteArrayList 线程安全(可重入锁)</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lock<span class="token punctuation">;</span>
    lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token function">getArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> newElements <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//写时复制，内存占用大，适合写多读少的并发场景</span>
        newElements<span class="token punctuation">[</span>len<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token function">setArray</span><span class="token punctuation">(</span>newElements<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token comment">//只能保证数据最终一致性，不保证实时一致性；并发性比Vector好</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="concurrenthashmap-线程安全-cas-synchronized" tabindex="-1"><a class="header-anchor" href="#concurrenthashmap-线程安全-cas-synchronized" aria-hidden="true">#</a> ConcurrentHashMap 线程安全(CAS + synchronized)</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>Unsafe</span> <span class="token class-name">U</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token keyword">volatile</span> <span class="token keyword">int</span> sizeCtl<span class="token punctuation">;</span>
<span class="token keyword">transient</span> <span class="token keyword">volatile</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> table<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> <span class="token constant">SIZECTL</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> <span class="token constant">ABASE</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">ASHIFT</span><span class="token punctuation">;</span>
<span class="token constant">SIZECTL</span> <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span>objectFieldOffset
    <span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;sizeCtl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">ABASE</span> <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span><span class="token function">arrayBaseOffset</span><span class="token punctuation">(</span>ak<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> scale <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span><span class="token function">arrayIndexScale</span><span class="token punctuation">(</span>ak<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>scale <span class="token operator">&amp;</span> <span class="token punctuation">(</span>scale <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;data type scale not a power of two&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">ASHIFT</span> <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">-</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">numberOfLeadingZeros</span><span class="token punctuation">(</span>scale<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> value <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> hash <span class="token operator">=</span> <span class="token function">spread</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> binCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab <span class="token operator">=</span> table<span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> f<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> i<span class="token punctuation">,</span> fh<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tab <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            tab <span class="token operator">=</span> <span class="token function">initTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//初始化table</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>f <span class="token operator">=</span> <span class="token function">tabAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">casTabAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
                         <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>                   <span class="token comment">// no lock when adding to empty bin</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>fh <span class="token operator">=</span> f<span class="token punctuation">.</span>hash<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">MOVED</span><span class="token punctuation">)</span>
            tab <span class="token operator">=</span> <span class="token function">helpTransfer</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">V</span> oldVal <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//链表或红黑树添加节点，加锁</span>
				<span class="token comment">//...</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> binCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">tabAt</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token class-name">U</span><span class="token punctuation">.</span><span class="token function">getObjectVolatile</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>i <span class="token operator">&lt;&lt;</span> <span class="token constant">ASHIFT</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token constant">ABASE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">boolean</span> <span class="token function">casTabAt</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span>
                                    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">U</span><span class="token punctuation">.</span><span class="token function">compareAndSwapObject</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>i <span class="token operator">&lt;&lt;</span> <span class="token constant">ASHIFT</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token constant">ABASE</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">initTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">;</span> <span class="token keyword">int</span> sc<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab <span class="token operator">=</span> table<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> tab<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>sc <span class="token operator">=</span> sizeCtl<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//数组初始化或扩容</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lost initialization race; just spin</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">U</span><span class="token punctuation">.</span><span class="token function">compareAndSwapInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token constant">SIZECTL</span><span class="token punctuation">,</span> sc<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//JVM会根据处理器类型，为汇编指令cmpxhg，比较并交换操作数，多处理器加上Lock前缀，单处理器则忽略（确保对内存读-改-写操作原子执行，禁止该指令与前后读写指令重排序，把写缓冲区中的所有数据刷新到内存）</span>
            <span class="token comment">//CAS缺点：存在ABA问题，采用版本号解决；循环时间长，开销大；只能保证一个共享变量</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab <span class="token operator">=</span> table<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> tab<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token punctuation">(</span>sc <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> sc <span class="token operator">:</span> <span class="token constant">DEFAULT_CAPACITY</span><span class="token punctuation">;</span>
                    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
                    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> nt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    table <span class="token operator">=</span> tab <span class="token operator">=</span> nt<span class="token punctuation">;</span>
                    sc <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                sizeCtl <span class="token operator">=</span> sc<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> tab<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> MYSQL</h4><h5 id="索引实现" tabindex="-1"><a class="header-anchor" href="#索引实现" aria-hidden="true">#</a> 索引实现</h5><h5 id="b-tree索引-b-树" tabindex="-1"><a class="header-anchor" href="#b-tree索引-b-树" aria-hidden="true">#</a> B-Tree索引(B+树)</h5><p>叶子节点存放所有索引值，非叶子节点用于快速定位包含目标值的叶子节点；叶子节点的值有序；叶子节点之间以链表关联</p><p>InnoDb：如使用聚簇索引（索引和行数据在一起存储，一种数据存储组织方式，通过主键实现，如果没有主键会选择唯一非空索引，如果还是没有，隐式生成一个主键），则叶子节点包含行数据，直接返回；如果使用非聚簇索引（普通索引），则根据叶子节点的主键查询聚簇索引，最后返回数据。</p><p>MyISAM: 叶子节点除索引值只存储指向行数据的指针，根据该指针从表文件查询数据</p><p>支持范围查找，支持排序，分组，支持前缀匹配；占用空间较大</p><h5 id="hash索引-哈希表" tabindex="-1"><a class="header-anchor" href="#hash索引-哈希表" aria-hidden="true">#</a> Hash索引(哈希表)</h5><p>查找速度最快o(1)；不支持范围查找，需要处理hash冲突，必须全值精确匹配</p><p>ibdata：innoDB表元数据（表，列，索引，索引列），undo log, change buffer, doublewrite buffer。启用innodb_file_per_table选项，新创建表的数和索引将存储在单独的.ibd文件(show GLOBAL VARIABLES like &#39;%innodb_file%&#39;)</p><p>ib_logfile: 事务日志/redo日志，采用顺序循环写入，每开启一个事务，会记录对数据文件修改的物理位置或偏移量。文件个数由innodb_log_files_in_group控制(show GLOBAL VARIABLES like &#39;%innodb_log%&#39;)。记录所有innodb表数据变化，正在执行的dml及ddl语句，系统崩溃数据恢复</p><h5 id="事务实现-redo-undo-log-锁-mvcc" tabindex="-1"><a class="header-anchor" href="#事务实现-redo-undo-log-锁-mvcc" aria-hidden="true">#</a> 事务实现（redo&amp;undo log, 锁, MVCC）</h5><h5 id="redo-log" tabindex="-1"><a class="header-anchor" href="#redo-log" aria-hidden="true">#</a> redo log</h5><p>redo log buffer &amp; redo log，分别在内存和磁盘，用于恢复数据，保障MySQL宕机时已提交事务的持久化(mysql修改会先存到Buffer Pool(缓冲池，包含磁盘数据页的映射)，读数据会先从缓冲池读取，如果缓冲池没有，则从磁盘读取再放入缓冲池；写数据会先写入缓冲池，然后用后台线程定期同步缓冲池到磁盘)</p><p>redo log顺序存储，缓存同步随机操作；缓存同步是以数据页为单位，每次传输数据大小大于redo log</p><h5 id="undo-log" tabindex="-1"><a class="header-anchor" href="#undo-log" aria-hidden="true">#</a> undo log</h5><p>记录事务修改之前版本的数据信息，用于回滚数据，保障未提交事务的原子性。数据变更操作都生成一条undo log，并且回滚日志必须先于数据持久化到磁盘，事务回滚就是根据回滚日志做逆向操作</p><h5 id="读写锁-shared-lock-exclusive-lock" tabindex="-1"><a class="header-anchor" href="#读写锁-shared-lock-exclusive-lock" aria-hidden="true">#</a> 读写锁（shared lock / exclusive lock）</h5><p>InnoDB行锁：共享锁（允许事务读一行，阻止其他事务获得相同数据集的排他锁, select * from table_name where ... lock in share mode），排他锁（允许获得排他锁的事务更新数据，阻止其他事务取得相同数据集的读写锁, select * from table_name where ... for update），如果没有及时commit/rollback，可能会造成其他事务长时间等待，影响并发效率</p><p>行锁实现方式：通过给索引上的索引项加锁实现，只有通过索引条件检索数据，才使用行锁，否则将使用表锁</p><p>意向锁（intention locks，表锁，为了允许行锁和表锁共存），意向共享锁(IS)，意向排他锁(IX)，事务打算给数据行加共享/排他锁，在加锁前必须先取得该表的意向锁</p><p>间隙锁（范围检索数据时，请求共享或排他锁时，会给符合条件的已有数据记录索引项加锁，范围内不存在的记录也会加锁），阻塞范围键值并发插入，造成锁等待</p><h5 id="mvcc-multiversion-concurrency-control-多版本并发控制" tabindex="-1"><a class="header-anchor" href="#mvcc-multiversion-concurrency-control-多版本并发控制" aria-hidden="true">#</a> MVCC（MultiVersion Concurrency Control) 多版本并发控制</h5><p>通过每行记录后面保存两个隐藏列实现（保存行的创建时间，过期时间，实际存储系统版本号，每开启一个新事务，系统版本号会自动递增，用于和查询到的每行记录版本号比较），通过数据多版本实现不加锁读进而做到读写并行。实现依赖：undo log记录某行数据多个版本数据，read view判断当前版本数据的可见性（https://dev.mysql.com/doc/refman/8.0/en/innodb-multi-versioning.html）</p><p>READ UNCOMMITTED: 读写并行，性能高；造成脏读，未提交事务的数据也会被读取到</p><p>READ COMMITTED: 写锁，读不加锁；造成不可重复读（事务中会读取到其他事务新提交的数据，造成多次读取结果不一样），幻读</p><p>REPEATABLE READ:</p><p>写锁，读不加锁采用MVCC，读写并行</p><p>select: 只查找版本小于等于当前事务版本的数据行，确保在事务开始前已经存在或事务自身插入或修改; 行删除版本未定义或大于当前事务版本号，确保事务读取到的行，在事务开始之前未被删除</p><p>insert: 为新插入行保存当前系统版本号作为行版本号</p><p>delete: 为删除行保存当前系统版本号作为行删除标识</p><p>update: 插入一行新记录保存当前系统版本号作为行版本号，同时保存为原来行作为行删除标识</p><p>会产生幻读（如果事务中有其他新事务提交的新插入行，查询记录是否存在，不存在，准备插入该记录，但是执行发现此记录已存在，无法插入）</p><p>SERIALIZABLE: 加锁读，读写串行，性能低</p><h4 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> Redis</h4><h5 id="redisobject-结构" tabindex="-1"><a class="header-anchor" href="#redisobject-结构" aria-hidden="true">#</a> redisObject 结构</h5><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">redisObject</span> <span class="token punctuation">{</span>
    <span class="token comment">// 类型(string,list,hash,set,zset)</span>
    <span class="token keyword">unsigned</span> type<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token comment">// 编码(通过OBJECT ENCODING key查看, int:long类型整数，embstr:embstr编码的简单动态字符串，raw:简单动态字符串，hashtable:字典，linkedlist:双端链表，ziplist:压缩列表，intset:整数集合，skiplist：跳跃表和字典)</span>
    <span class="token keyword">unsigned</span> encoding<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token comment">// 指向底层实现数据结构的指针</span>
    <span class="token keyword">void</span> <span class="token operator">*</span>ptr<span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span> robj<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="简单动态字符串-simple-dynamic-string-sds" tabindex="-1"><a class="header-anchor" href="#简单动态字符串-simple-dynamic-string-sds" aria-hidden="true">#</a> 简单动态字符串(simple dynamic string, SDS)</h5><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">//简单动态字符串(simple dynamic string, SDS)</span>
<span class="token comment">//获取字符串长度复杂度o(1); 修改字符串时，会检查内存空间再进行字符串修改，杜绝缓冲区溢出；采用空间预分配和惰性释放空间</span>
<span class="token keyword">struct</span> <span class="token class-name">sdshdr</span> <span class="token punctuation">{</span>
    <span class="token comment">// buf 中已占用空间的长度</span>
    <span class="token keyword">int</span> len<span class="token punctuation">;</span>
    <span class="token comment">// buf 中剩余可用空间的长度</span>
    <span class="token keyword">int</span> free<span class="token punctuation">;</span>
    <span class="token comment">// 数据空间，以&#39;\0&#39;作为结束标识符</span>
    <span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//字符串对象：int编码，保存整数值；raw编码，字符串保存大于32字节字符串，内存分配次数两次；embstr编码，字符串保存小于等于32字节字符串，内存分配只需一次</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="压缩列表-ziplist" tabindex="-1"><a class="header-anchor" href="#压缩列表-ziplist" aria-hidden="true">#</a> 压缩列表(ziplist)</h5><p>一系列特殊编码的连续内存块组成的顺序存储结构，不同于数组，为节省内存每个元素所占内存大小可以不同。内存占用少，容易加载到CPU缓存，结构紧凑，减少内存碎片，平均时间复杂度o(n)；连锁更新</p><p>zlbytes: ziplist的长度（单位: 字节)，是一个32位无符号整数</p><p>zltail: ziplist最后一个节点的偏移量，反向遍历ziplist或者pop尾部节点的时候有用。</p><p>zllen: ziplist的节点（entry）个数</p><p>entry: 节点(prevlengh: 记录上一个节点的长度，为了方便反向遍历ziplist; encoding: 当前节点的编码规则; data: 当前节点的值，可以是数字或字符串)</p><p>zlend: 值为0xFF，用于标记ziplist的结尾</p><h5 id="链表" tabindex="-1"><a class="header-anchor" href="#链表" aria-hidden="true">#</a> 链表</h5><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">list</span> <span class="token punctuation">{</span>
    <span class="token comment">// 表头节点</span>
    listNode <span class="token operator">*</span> head<span class="token punctuation">;</span>
    <span class="token comment">// 表尾节点</span>
    listNode <span class="token operator">*</span> tail<span class="token punctuation">;</span>
    <span class="token comment">// 链表所包含的节点数量</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">long</span> len<span class="token punctuation">;</span>
    <span class="token comment">// 节点值复制函数</span>
    <span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span>dup<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>ptr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 节点值释放函数</span>
    <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>free<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>ptr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 节点值对比函数</span>
    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>match<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>ptr<span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token operator">*</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> list<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">listNode</span> <span class="token punctuation">{</span>
    <span class="token comment">// 前置节点</span>
    <span class="token keyword">struct</span> <span class="token class-name">listNode</span> <span class="token operator">*</span> prev<span class="token punctuation">;</span>
    <span class="token comment">// 后置节点</span>
    <span class="token keyword">struct</span> <span class="token class-name">listNode</span> <span class="token operator">*</span> next<span class="token punctuation">;</span>
    <span class="token comment">// 节点的值</span>
    <span class="token keyword">void</span> <span class="token operator">*</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>listNode<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="字典" tabindex="-1"><a class="header-anchor" href="#字典" aria-hidden="true">#</a> 字典</h5><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">//dict.h</span>
<span class="token comment">//字典 或称符号表symbol table, 关联数组associative array, 映射map</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">dict</span> <span class="token punctuation">{</span>
    <span class="token comment">// 类型特定函数</span>
    dictType <span class="token operator">*</span>type<span class="token punctuation">;</span>
    <span class="token comment">// 私有数据</span>
    <span class="token keyword">void</span> <span class="token operator">*</span>privdata<span class="token punctuation">;</span>
    <span class="token comment">// 哈希表，rehash操作，为ht[1]分配空间，重新计算ht[0]哈希值，放到ht[1]，迁移完成后，将ht[1]设置为ht[0]，释放ht[0]，并创建空白ht[1],为下次rehash做准备</span>
    dictht ht<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// rehash索引，分多次渐进式rehash，完成后rehashidx增加1，迁移完成rehashidx设为-1，标识rehash完成。期间，查找先找ht[0]，再找ht[1]；添加操作一律添加到ht[1]</span>
    <span class="token keyword">int</span> rehashidx<span class="token punctuation">;</span> <span class="token comment">/* rehashing not in progress if rehashidx == -1 */</span>
    <span class="token keyword">int</span> iterators<span class="token punctuation">;</span> <span class="token comment">/* number of iterators currently running */</span>
<span class="token punctuation">}</span> dict<span class="token punctuation">;</span>
<span class="token comment">//字典内部hashtable</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">dictht</span> <span class="token punctuation">{</span>
    <span class="token comment">// 哈希表数组</span>
    dictEntry <span class="token operator">*</span><span class="token operator">*</span>table<span class="token punctuation">;</span>
    <span class="token comment">// 哈希表大小</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">long</span> size<span class="token punctuation">;</span>
    <span class="token comment">// 哈希表大小掩码，用于计算索引值，size-1</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">long</span> sizemask<span class="token punctuation">;</span>
    <span class="token comment">// 已有节点数量</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">long</span> used<span class="token punctuation">;</span>
<span class="token punctuation">}</span> dictht<span class="token punctuation">;</span>
<span class="token comment">//hashtable节点</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">dictEntry</span> <span class="token punctuation">{</span>
    <span class="token comment">// key</span>
    <span class="token keyword">void</span> <span class="token operator">*</span>key<span class="token punctuation">;</span>
    <span class="token comment">// 值</span>
    <span class="token keyword">union</span> <span class="token punctuation">{</span>
        <span class="token keyword">void</span> <span class="token operator">*</span>val<span class="token punctuation">;</span>
        <span class="token class-name">uint64_t</span> u64<span class="token punctuation">;</span>
        <span class="token class-name">int64_t</span> s64<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> v<span class="token punctuation">;</span>
    <span class="token comment">// 指向下个哈希表节点，形成链表</span>
    <span class="token keyword">struct</span> <span class="token class-name">dictEntry</span> <span class="token operator">*</span>next<span class="token punctuation">;</span>
<span class="token punctuation">}</span> dictEntry<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="跳跃表-1" tabindex="-1"><a class="header-anchor" href="#跳跃表-1" aria-hidden="true">#</a> 跳跃表</h5><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">//每个节点有多个指向其他节点的指针，从而快速访问节点</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">zskiplist</span> <span class="token punctuation">{</span>
    <span class="token comment">// 表头节点和表尾节点</span>
    structz skiplistNode <span class="token operator">*</span>header<span class="token punctuation">,</span> <span class="token operator">*</span>tail<span class="token punctuation">;</span>
    <span class="token comment">// 表中节点的数量</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">long</span> length<span class="token punctuation">;</span>
    <span class="token comment">// 表中层数最大的节点的层数</span>
    <span class="token keyword">int</span> level<span class="token punctuation">;</span>
<span class="token punctuation">}</span> zskiplist<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">zskiplistNode</span> <span class="token punctuation">{</span>
    <span class="token comment">// 层</span>
    <span class="token keyword">struct</span> <span class="token class-name">zskiplistLevel</span> <span class="token punctuation">{</span>
        <span class="token comment">// 前进指针</span>
        <span class="token keyword">struct</span> <span class="token class-name">zskiplistNode</span> <span class="token operator">*</span>forward<span class="token punctuation">;</span>
        <span class="token comment">// 跨度</span>
        <span class="token keyword">unsigned</span> <span class="token keyword">int</span> span<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> level<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 后退指针</span>
    <span class="token keyword">struct</span> <span class="token class-name">zskiplistNode</span> <span class="token operator">*</span>backward<span class="token punctuation">;</span>
    <span class="token comment">// 分值</span>
    <span class="token keyword">double</span> score<span class="token punctuation">;</span>
    <span class="token comment">// 成员对象</span>
    robj <span class="token operator">*</span>obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span> zskiplistNode<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="整数集合" tabindex="-1"><a class="header-anchor" href="#整数集合" aria-hidden="true">#</a> 整数集合</h5><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">//当集合只包含整数元素，并且元素个数不多时，作为集合键的底层实现，可以保存int16_t,int32_t,int64_t整数值，不会出现重复元素</span>
<span class="token comment">//升级操作：原来保存的是小类型(如int16_t)的整数，当插入比其类型大(如int64_t)的整数，会把集合里的元素数据类型转换成大的类型，节约内存，但不支持降级操作</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">intset</span> <span class="token punctuation">{</span>
    <span class="token comment">// 编码方式</span>
    <span class="token class-name">uint32_t</span> encoding<span class="token punctuation">;</span>
    <span class="token comment">// 集合包含的元素数量</span>
    <span class="token class-name">uint32_t</span> length<span class="token punctuation">;</span>
    <span class="token comment">// 保存元素的数组</span>
    <span class="token class-name">int8_t</span> contents<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> intset<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="列表对象" tabindex="-1"><a class="header-anchor" href="#列表对象" aria-hidden="true">#</a> 列表对象</h5><p>ziplist编码：每个节点保存一个列表元素。满足所有字符串长度都小于64字节，元素数量小于512</p><p>linkedlist编码：每个节点都保存一个字符串对象，每个字符串对象保存一个列表元素</p><h5 id="哈希对象" tabindex="-1"><a class="header-anchor" href="#哈希对象" aria-hidden="true">#</a> 哈希对象</h5><p>ziplist编码：key-value键值对以紧密相连的方式放入，总是向表尾添加。满足所有键值字符串长度都小于64字节，键值对数量小于512个</p><p>hashtable编码：字典实现，字典的键值都是字符串对象，字典的键保存key，字典值保存value</p><h5 id="集合对象" tabindex="-1"><a class="header-anchor" href="#集合对象" aria-hidden="true">#</a> 集合对象</h5><p>intset编码：所有元素都保存在整数集合。满足所有元素都是整数值，元素个数小于等于512个</p><p>hashtable编码：字典每个键都是字符串对象，保存集合元素，字典值都是NULL</p><h5 id="有序集合对象" tabindex="-1"><a class="header-anchor" href="#有序集合对象" aria-hidden="true">#</a> 有序集合对象</h5><p>ziplist编码：类似哈希对象，两个紧密相连的压缩列表节点，第一个保存元素的成员，第二个保存元素的分值，分值小的靠近表头，大的靠近表尾。满足所有元素小于64字节，元素个数小于128个</p><p>skiplist编码：同时使用跳跃表和字典，跳跃表节点保存集合元素，按分值从小到大排列，节点object属性保存元素成员，score属性保存分值；字典每个键值对保存集合元素，字典键保存元素成员，字典值保存分值。跳跃表有序，但查询分值复杂度o(logn)，字典查询分值复杂度o(1)，但是无序；采用两种结构但是集合元素成员和分值是共享的，通过指针指向同一地址</p><h4 id="elasticsearch" tabindex="-1"><a class="header-anchor" href="#elasticsearch" aria-hidden="true">#</a> ElasticSearch</h4><h5 id="索引结构" tabindex="-1"><a class="header-anchor" href="#索引结构" aria-hidden="true">#</a> 索引结构</h5><p>分布式可扩展：用户查询在index上完成，index由shard组成。shard是数据存储的最小单元，对应lucene的library。</p><p>Elasticsearch为每个field建立倒排索引term，对应符合的文档id存储在Posting List（要求有序）。将磁盘里的东西尽量搬进内存，减少磁盘随机读取次数，压缩内存使用空间</p><p>通过term的前缀与Term Dictionary的block之间的映射关系，结合FST(有穷状态转换器，Finite State Transducers，空间占用小，此单单词重复利用，压缩存储空间，查询速度快o(len(str)))压缩，将term index缓存到内存，从term index查到对应term dictionary的block位置，再在磁盘上找term，减少磁盘随机读次数</p><p>Posting list压缩（Frame Of Reference，增量编码压缩，将大数变小数，仅存储增量值，按bit排队（头部存储Bits per value: 1 byte，具体按实际所需bits大小存储），最后按字节存储）</p><p>Roaring bitmaps，将posting list按照65535（2^16-1，2个字节表示最大数，short存储单位）为界限分块，以&lt;商，余数&gt;组合表示每一组id，如果块包含大于4096的值，采用bit set，否则用2个字节的数组</p><p>联合索引：跳跃表（对最短posting list的每个id，在另外的posting list中查找是否存在，最后得到交集的结果）；bitset（直接按位与，得到的结果就是最后的交集）</p><h5 id="lucene内部结构" tabindex="-1"><a class="header-anchor" href="#lucene内部结构" aria-hidden="true">#</a> lucene内部结构</h5><p>lucene内部数据由segment组成，写入的数据先写在内存中，经过refresh间隔将该时段的全部数据refresh成一个segment，然后merge成更大的segment。查询时会遍历每个segment，由于在内存中完成写入效率高，但存在丢失数据的风险，Elasticsearch实现了translog，防止数据丢失</p><p>doc: lucene中一条记录</p><p>field: 记录中的字段概念</p><p>term: 索引最小单位，如果field对应内容是全文检索类型，会进行分词，结果由term组成。不分词，字段内容是一个term</p><p>倒排索引(inverted index): 实现term到doc list的映射</p><p>正排数据：原始数据(doc list)</p><p>docvalues: 列式存储的名称，用作分析和排序</p><h5 id="lucene文件内容" tabindex="-1"><a class="header-anchor" href="#lucene文件内容" aria-hidden="true">#</a> lucene文件内容</h5><p>由很多segment文件组成，每个segment包含如下文件</p><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Extension</th><th style="text-align:left;">Brief Description</th></tr></thead><tbody><tr><td style="text-align:left;">Segment Info</td><td style="text-align:left;">.si</td><td style="text-align:left;">segment的元数据文件，记录segment文档数量，对应文件列表</td></tr><tr><td style="text-align:left;">Compound File</td><td style="text-align:left;">.cfs, .cfe</td><td style="text-align:left;">一个segment包含了如下表的各个文件，为减少打开文件的数量，在segment小的时候，segment的所有文件内容都保存在cfs文件中，cfe文件保存了lucene各文件在cfs文件的位置信息</td></tr><tr><td style="text-align:left;">Fields</td><td style="text-align:left;">.fnm</td><td style="text-align:left;">保存了fields的相关信息，包括field数量，类型，是否存储，索引，分词，列存</td></tr><tr><td style="text-align:left;">Field Index</td><td style="text-align:left;">.fdx</td><td style="text-align:left;">正排存储文件的元数据信息</td></tr><tr><td style="text-align:left;">Field Data</td><td style="text-align:left;">.fdt</td><td style="text-align:left;">存储了正排存储数据，写入的原文存储在这</td></tr><tr><td style="text-align:left;">Term Dictionary</td><td style="text-align:left;">.tim</td><td style="text-align:left;">倒排索引的元数据信息</td></tr><tr><td style="text-align:left;">Term Index</td><td style="text-align:left;">.tip</td><td style="text-align:left;">倒排索引文件，存储了所有的倒排索引数据，倒排索引实现为FST tree，内存空间占用低</td></tr><tr><td style="text-align:left;">Frequencies</td><td style="text-align:left;">.doc</td><td style="text-align:left;">保存了每个term的doc id列表和term在doc中的词频</td></tr><tr><td style="text-align:left;">Positions</td><td style="text-align:left;">.pos</td><td style="text-align:left;">Stores position information about where a term occurs in the index 全文索引的字段，会有该文件，保存了term在doc中的位置</td></tr><tr><td style="text-align:left;">Payloads</td><td style="text-align:left;">.pay</td><td style="text-align:left;">Stores additional per-position metadata information such as character offsets and user payloads 全文索引的字段，使用了一些像payloads的高级特性会有该文件，保存了term在doc中的一些高级特性</td></tr><tr><td style="text-align:left;">Norms</td><td style="text-align:left;">.nvd, .nvm</td><td style="text-align:left;">文件保存索引字段加权数据</td></tr><tr><td style="text-align:left;">Per-Document Values</td><td style="text-align:left;">.dvd, .dvm</td><td style="text-align:left;">lucene的docvalues文件，即数据的列式存储，用作聚合和排序</td></tr><tr><td style="text-align:left;">Term Vector Data</td><td style="text-align:left;">.tvx, .tvd, .tvf</td><td style="text-align:left;">Stores offset into the document data file 保存索引字段的矢量信息，用在对term进行高亮，计算文本相关性中使用</td></tr><tr><td style="text-align:left;">Live Documents</td><td style="text-align:left;">.liv</td><td style="text-align:left;">记录了segment中删除的doc</td></tr></tbody></table><h5 id="读写数据原理" tabindex="-1"><a class="header-anchor" href="#读写数据原理" aria-hidden="true">#</a> 读写数据原理</h5><p>写入数据：客户端发送请求，通过coordinating node(协调节点)对document进行路由，将请求转发给对应的node处理，然后同步到replica node，如果发现primary node和所有replica node处理完成后返回后请求到客户端</p><p>写入数据底层原理(refresh, flush, translog, merge)</p><ol><li>先写入buffer(buffer里面数据搜索不到）同时写入translog日志文件；</li><li>buffer快满，或一段时间后，将buffer数据refresh到新的OS cache中，每秒将OS cache数据写入segment file。如果每秒没有新数据到buffer，会创建新的空segment file，只要buffer中数据被refresh到OS cache中，数据就可以被搜索到。只要数据输入到OS cache中，buffer内容就清空。同时数据到shard后，会写入translog，每隔5秒将translog中的数据持久化到磁盘</li><li>当translog文件变大到一定程度，会触发commit操作，将一个commit point写入到磁盘文件，标识对应的所有segment file，将OS cache中数据fsync到磁盘（在commit前，所有数据都在buffer或OS cache中，一旦宕机则数据丢失，重启会读取translog日志文件数据恢复）。将translog文件清空，重新启动一个translog，默认每隔30分钟commit。整个commit过程叫做一个flush操作</li><li>删除操作，commit时会产生.del文件，将doc标记为delete状态</li><li>更新操作，将原来的doc标识为delete状态，重新写入</li><li>会产生很多segment file文件，将定期执行merge操作，将多个segment file合并为一个，同时将标记为delete文件删除，将新segment file写入磁盘，会写一个commit point，标识所有新的segment file</li></ol><p>读数据：客户端发送请求，通过coordinating node对document路由转发，在primary shard及所有replica中随机选择一个，让读请求负载均衡，接受请求的node，返回document给coordinate node，再返回给客户端</p><p>搜索数据：客户端发送请求，通过coordinating node将搜索请求转发给所有的shard对应的primary shard或replica shard，每个shard将搜索结果（唯一标识），返回给协调节点进行数据合并，排序，分页等操作，然后根据唯一标识去各节点拉取数据，最后返回给客户端</p><p>搜索底层原理</p><ol><li>将广播请求到搜索的每一个节点的分片拷贝，查询请求可被主分片或副分片处理，协调节点在之后请求轮询所有分片拷贝</li><li>每个分片将在本地构建优先级队列，若要求返回结果排序从from开始数量为size的结果集，每个节点都会产生from+size的结果集，然会把结果集中每个文档ID和排序所需信息返回给协调节点</li><li>协调节点将所有结果汇总，进行全局排序，确定实际需要的文档，向含有该文档的分片请求，然后返回给客户端</li></ol><h4 id="react-vue" tabindex="-1"><a class="header-anchor" href="#react-vue" aria-hidden="true">#</a> React / Vue</h4><p>虚拟DOM，就是用一个JS对象描述一个DOM节点。产生的原因以及最大用途：数据驱动视图，数据发生变化视图就要随之更新，更新视图时需要操作DOM，而操作真实DOM非常耗费性能，因为浏览器的标准把DOM设计得非常复杂，真正的DOM元素非常庞大。可以用JS模拟出一个DOM节点，当数据发生变化时，对比变化前后的虚拟DOM节点，通过DOM-Diff算法计算出需要更新的地方，然后更新需要更新的视图。传统diff算法复杂度o(n^3)</p><h5 id="react" tabindex="-1"><a class="header-anchor" href="#react" aria-hidden="true">#</a> React</h5><p>将Virtual DOM树转换成actual DOM树的最少操作过程称为协调(Reconciliation)。V16版本前协调机制是Stack reconciler(修改期间，主线程被js占用，因此任何交互、布局、渲染都会停止)，diff算法策略（复杂度o(n)）</p><ol><li>web UI跨级移动操作非常少，可忽略不计(tree diff)</li><li>拥有相同类型的两个组件产生的DOM结构相似，反之则不尽相同(component diff, React基于组件开发)</li><li>对于同一层级的一组子节点，通过分配唯一id进行区分(Element diff)</li></ol><p>V16版本是Fiber reconciler(Fiber, 纤维，比线程控制得更精密的并发处理机制，将任务分片，划分优先级，同时能够实现类似操作系统中对线程抢占式调度，packages\react-reconciler\src ReactInternalTypes.js )，从依赖于内置堆栈的同步递归模型，变为具有链表和指针的异步模型，每个Element对应一个Fiber Node，成为Fiber Tree（层次遍历，diff策略建立在节点操作都在节点树同一层级中进行），记录当前页面状态，采用双缓存的策略(double buffering)，创建WorkInProgress Tree, 反映要刷新到屏幕的未来状态，构造完毕，将当前指针指向WorkInProgress Tree，丢弃旧Fiber Tree，复用内部对象(fiber)，节省内存分配和GC时间开销。</p><h5 id="vue" tabindex="-1"><a class="header-anchor" href="#vue" aria-hidden="true">#</a> Vue</h5><p>VNode类(src/core/vdom/vnode.js)可以实例出不同类型的虚拟DOM节点，视图渲染前，template模板先编译成VNode并缓存，数据变化后生成的VNode与前一次缓存的VNode比较，有差异的VNode对应的真实DOM节点重新渲染插入视图，完成一次视图更新</p><p>diff策略：只进行同层级比较，忽略跨级操作（src/core/vdom/patch.js）</p><h4 id="hbase" tabindex="-1"><a class="header-anchor" href="#hbase" aria-hidden="true">#</a> HBase</h4><p>基于列存储，数据持久化在HDFS（HDFS块block设置，如果过大，从磁盘传输数据时间会明显大于寻址时间，导致处理数据时较慢，如果过小，大量小文件会占用NameNode大量内存存储元数据，寻址时间增大，HDFS中凭据寻址时间大概为10ms，当寻址时间为传输时间的1%，为最佳状态，目前磁盘传输速率普遍为100MB/s，最佳block大小为100MB，设为128MB）。分布式数据库，使用zookeeper管理集群，分为Master和RegionServer</p><h4 id="mongodb" tabindex="-1"><a class="header-anchor" href="#mongodb" aria-hidden="true">#</a> MongoDB</h4><h4 id="kafka" tabindex="-1"><a class="header-anchor" href="#kafka" aria-hidden="true">#</a> Kafka</h4><p>工作模式：启动zookeeper的server；启动kafka的server；producer生产数据，通过zookeeper找到broker(每个kafka实例称为broker)，再将数据push到Broker保存；customer通过zookeeper找到broker，再主动pull数据</p><p>Producer: 生产message到topic</p><p>Consumer: 订阅topic消费message，consumer作为一个线程消费，消费消息策略（roundrobin）</p><p>Consumer Group: 包含多个consumer，维护一个下标文件offset，记录当前组消费数据下标，消费一条，offset递增1。partition中每个message只能被一个组中的consumer消费，其他consumer不能消费同一topic中同一分区的数据，不同组consumer可以消费同一topic同一分区的数据</p><p>Broker：kafka节点(中间存储阵列)，多个broker组成kafka集群，负责持久化和备份具体kafka消息</p><p>Topic: 一类消息，消息存放的目录即主题（轮询：顺序分发，仅针对message没有key时；Hash分区：message有key时，key.hash%分区个数，增加分区时，partition里的message不会重分配，数据继续写入才会参与load balance）</p><p>Partition: 分区，topic物理上分组，每个partition是一个有序的队列，对应文件夹{topicname}{partition}{序号}，集群负载均衡基本单位，每条消息在partition中位置称为offset偏移量，类型为long型数字，消息被消费，不会立即删除，根据borker设置(基于时间存储或基于大小)，到期不管消息是否消费，都清除</p><p>Segment: partition物理上由多个segment组成，每个Segment存储多个message信息（默认1G，7天后删除），每个message由key-value和时间戳组成。包括index file（.index，元数据指向数据文件message物理偏移地址）和data file(.log)。第一个segment文件名从0开始，后续为上一个最后一条消息的offset，数字最大为64位long，19位数字字符长度，没有数字用0填充</p><p>Segment data file</p><table><thead><tr><th style="text-align:left;">8 byte offset</th><th>消息id(offset)</th></tr></thead><tbody><tr><td style="text-align:left;">4 byte message size</td><td>message大小</td></tr><tr><td style="text-align:left;">4 byte CRC32</td><td>用crc32校验message</td></tr><tr><td style="text-align:left;">1 byte magic</td><td>kafka服务程序协议版本号</td></tr><tr><td style="text-align:left;">1 byte attributes</td><td>独立版本、或标识压缩类型、或编码类型</td></tr><tr><td style="text-align:left;">4 byte key length</td><td>key的长度，key为-1时，K byte key字段不填</td></tr><tr><td style="text-align:left;">K byte key</td><td>可选</td></tr><tr><td style="text-align:left;">value bytes payload</td><td>实际消息数据</td></tr></tbody></table><p>查找message步骤：根据offset二分查找文件列表，定位文件，在.index文件中有两列（序列，地址），其中序列=查找message的偏移量-当前文件的起始偏移量，根据序列对应的地址，找到相应位置的message</p><p>zookeeper保存Consumer和Producer信息</p><h4 id="rabbitmq" tabindex="-1"><a class="header-anchor" href="#rabbitmq" aria-hidden="true">#</a> RabbitMQ</h4><h4 id="rocketmq" tabindex="-1"><a class="header-anchor" href="#rocketmq" aria-hidden="true">#</a> RocketMQ</h4></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/src/数据结构与算法/大话数据结构.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: refersearch@163.com">wuyanluoye</span><!--]--><!--]--></div></div></footer><!----><!----><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">测试页脚</div><div class="vp-copyright">Copyright © 2023 Mr.Hope</div></footer></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-lybKqyLW.js" defer></script>
  </body>
</html>
